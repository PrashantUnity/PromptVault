@using PromptsValut.Constants

@if (IsVisible)
{
    <div class="modal" @onclick="CloseModal">
        <div class="modal-content max-w-4xl w-full max-h-[90vh]" @onclick:stopPropagation="true">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-semibold flex items-center gap-3 leading-tight">
                        <span class="inline-flex items-center justify-center flex-shrink-0">@((MarkupString)SvgIcons.GetIcon("plus", "h-6 w-6 text-green-500"))</span>
                        Create New Prompt
                    </h2>
                    <button @onclick="CloseModal" class="p-2 rounded-md hover:bg-accent">
                        @((MarkupString)SvgIcons.GetIcon("close", "h-5 w-5"))
                    </button>
                </div>
                
                <div class="space-y-6">
                    <form @onsubmit="CreatePrompt" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Title *</label>
                                <input @bind="newPrompt.Title" type="text" class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Enter prompt title" required />
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Category *</label>
                                <select @bind="newPrompt.Category" class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary" required>
                                    <option value="">Select a category</option>
                                    @foreach (var category in PromptService.Categories.Where(c => c.Id != "all"))
                                    {
                                        <option value="@category.Id">@category.Name</option>
                                    }
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Description</label>
                            <textarea @bind="newPrompt.Description" class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary" rows="2" placeholder="Brief description of what this prompt does"></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Content *</label>
                            <textarea @bind="newPrompt.Content" class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm" rows="8" placeholder="Enter your prompt content here..." required></textarea>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Difficulty</label>
                                <select @bind="newPrompt.Difficulty" class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="beginner">Beginner</option>
                                    <option value="intermediate">Intermediate</option>
                                    <option value="advanced">Advanced</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Estimated Time</label>
                                <input @bind="newPrompt.EstimatedTime" type="text" class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="e.g., 5-10 minutes" />
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Tags (comma-separated)</label>
                            <input @bind="tagsInput" type="text" class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="e.g., email, marketing, campaign" />
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Usage Notes</label>
                            <textarea @bind="newPrompt.UsageNotes" class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary" rows="3" placeholder="Any special instructions or tips for using this prompt"></textarea>
                        </div>
                        
                        <div class="flex items-center justify-end gap-3 pt-4 border-t">
                            <button type="button" @onclick="CloseModal" class="px-4 py-2 border border-border rounded-md hover:bg-accent transition-colors">
                                Cancel
                            </button>
                            <button type="submit" class="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors">
                                Create Prompt
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
}

