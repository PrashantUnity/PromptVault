@using PromptsValut.Constants

<header class="fixed top-0 left-0 right-0 z-50 bg-white/90 dark:bg-gray-900/90 backdrop-blur-lg border-b border-gray-200/50 dark:border-gray-700/50 shadow-sm">
    <!-- Mobile Layout -->
    <div class="lg:hidden">
        <!-- Top Row: Navigation -->
        <div class="bg-white/95 dark:bg-gray-900/95 backdrop-blur-md border-b border-gray-200/50 dark:border-gray-700/50">
            <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <!-- Left: Hamburger menu -->
            <button @onclick="ToggleSidebar" class="p-2.5 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 shadow-sm focus-ring" aria-label="Open menu">
                @((MarkupString)SvgIcons.GetIcon("menu", "h-5 w-5 text-gray-700 dark:text-gray-300"))
            </button>
                
                <!-- Center: Logo -->
                <div class="flex items-center gap-2 group cursor-pointer" tabindex="0" aria-label="PromptVault Home">
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center group-hover:scale-105 transition-transform duration-300 shadow-lg">
                        <span class="text-white font-bold text-sm">PV</span>
                    </div>
                    <h1 class="text-lg font-bold text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300">
                        PromptVault
                    </h1>
                </div>
                
                <!-- Right: Controls -->
                <div class="flex items-center gap-2">
                    <button @onclick="NavigateToGenerator" class="p-2.5 rounded-xl bg-gradient-to-r from-purple-100 to-blue-100 dark:from-purple-900/30 dark:to-blue-900/30 hover:from-purple-200 hover:to-blue-200 dark:hover:from-purple-800/40 dark:hover:to-blue-800/40 transition-all duration-200 shadow-sm focus-ring" title="Prompt Generator" aria-label="Generator">
                        @((MarkupString)SvgIcons.GetIcon("wand", "h-4 w-4 text-purple-700 dark:text-purple-300"))
                    </button>
                    <button @onclick="RefreshData" class="p-2.5 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 shadow-sm focus-ring" title="Refresh External Data" aria-label="Refresh">
                        @((MarkupString)SvgIcons.GetIcon("refresh", "h-4 w-4 text-gray-700 dark:text-gray-300"))
                    </button>
                    <button @onclick="ShowHelp" class="p-2.5 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 shadow-sm focus-ring" title="Help" aria-label="Help">
                        @((MarkupString)SvgIcons.GetIcon("help", "h-4 w-4 text-gray-700 dark:text-gray-300"))
                    </button>
                    <ThemeToggle IsMobile="true" OnToggleTheme="ToggleTheme" />
                </div>
            </div>
        </div>
        
        <!-- Bottom Row: Search -->
        <div class="bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm">
            <div class="container mx-auto px-4 py-3">
                <div class="relative">
                    <SearchBar OnSearchChanged="OnSearchChanged" />
                </div>
            </div>
        </div>
    </div>
    
    <!-- Desktop Layout -->
    <div class="hidden lg:block">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between gap-4">
            <!-- Left section: Desktop branding -->
            <div class="flex items-center gap-2 group cursor-pointer">
                <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-violet-600 rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform duration-300">
                    <span class="text-white font-bold text-sm">PV</span>
                </div>
                <h1 class="text-xl font-semibold text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300">
                    PromptVault
                </h1>
            </div>

            <!-- Center section: Search bar -->
            <div class="flex-1 max-w-md mx-4" role="search">
                <SearchBar OnSearchChanged="OnSearchChanged" />
            </div>

            <!-- Right section: Controls -->
            <div class="flex items-center gap-2">
                <!-- Cache Status Indicator -->
                <div class="flex items-center gap-2 px-3 py-1 rounded-lg bg-gray-50 dark:bg-gray-800">
                    <div class="w-2 h-2 rounded-full @(GetCacheStatusColor().Replace("text-", "bg-"))"></div>
                    <span class="text-xs font-medium @GetCacheStatusColor()">@GetCacheStatusText()</span>
                </div>
                
                <button @onclick="NavigateToGenerator" class="p-2 rounded-lg bg-gradient-to-r from-purple-100 to-blue-100 dark:from-purple-900/30 dark:to-blue-900/30 hover:from-purple-200 hover:to-blue-200 dark:hover:from-purple-800/40 dark:hover:to-blue-800/40 transition-all duration-200 focus-ring" title="Prompt Generator" aria-label="Generator">
                    @((MarkupString)SvgIcons.GetIcon("wand", "h-5 w-5 text-purple-700 dark:text-purple-300"))
                </button>
                <button @onclick="ShowFavorites" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100 transition-all duration-200 focus-ring" title="View Favorites" aria-label="Favorites">
                    @((MarkupString)SvgIcons.GetIcon("heart", "h-5 w-5"))
                </button>
                <button @onclick="RefreshData" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100 transition-all duration-200 focus-ring" title="Refresh External Data" aria-label="Refresh">
                    @((MarkupString)SvgIcons.GetIcon("refresh", "h-5 w-5"))
                </button>
                <button @onclick="ToggleBackgroundRefresh" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100 transition-all duration-200 focus-ring" title="Toggle Background Refresh" aria-label="Background Refresh">
                    @if (BackgroundRefreshService.IsEnabled)
                    {
                        @((MarkupString)SvgIcons.GetIcon("play", "h-5 w-5 text-green-600"))
                    }
                    else
                    {
                        @((MarkupString)SvgIcons.GetIcon("pause", "h-5 w-5 text-gray-400"))
                    }
                </button>
                <button @onclick="ShowHelp" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100 transition-all duration-200 focus-ring" title="How to use PromptVault" aria-label="Help">
                    @((MarkupString)SvgIcons.GetIcon("help", "h-5 w-5"))
                </button>
                <ThemeToggle IsMobile="false" OnToggleTheme="ToggleTheme" />
            </div>
        </div>
    </div>
</header>

